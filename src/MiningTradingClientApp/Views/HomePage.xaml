<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MiningTradingClientApp.Views.HomePage"
             Title="Home">
    
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- Welcome Section -->
            <Label Text="Good Morning" 
                   Style="{StaticResource CaptionStyle}" />
            
            <Label Text="Minerals Trading" 
                   Style="{StaticResource HeadlineStyle}" />

            <!-- Portfolio Summary Card -->
            <Frame Style="{StaticResource CardStyle}">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Portfolio Value" 
                           Style="{StaticResource CaptionStyle}" />
                    
                    <Label x:Name="PortfolioValueLabel"
                           Text="$0.00" 
                           Style="{StaticResource PriceStyle}" />
                    
                    <HorizontalStackLayout Spacing="8">
                        <Label x:Name="PortfolioChangeLabel"
                               Text="+$0.00 (0.00%)" 
                               Style="{StaticResource PriceChangePositiveStyle}" />
                        <Label Text="Today" 
                               Style="{StaticResource SmallTextStyle}" 
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Quick Actions -->
            <Label Text="Quick Actions" 
                   Style="{StaticResource SubtitleStyle}"
                   Margin="0,10,0,0" />

            <Grid ColumnDefinitions="*,*" 
                  ColumnSpacing="12"
                  RowDefinitions="Auto">
                
                <!-- View Markets Button -->
                <Frame Grid.Column="0" 
                       Style="{StaticResource CardStyle}"
                       Padding="20">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnViewMarketsClicked" />
                    </Frame.GestureRecognizers>
                    <VerticalStackLayout Spacing="8">
                        <Label Text="ðŸ“Š" 
                               FontSize="32" 
                               HorizontalOptions="Center" />
                        <Label Text="View Markets" 
                               Style="{StaticResource BodyStyle}"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Portfolio Button -->
                <Frame Grid.Column="1" 
                       Style="{StaticResource CardStyle}"
                       Padding="20">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnPortfolioClicked" />
                    </Frame.GestureRecognizers>
                    <VerticalStackLayout Spacing="8">
                        <Label Text="ðŸ’¼" 
                               FontSize="32" 
                               HorizontalOptions="Center" />
                        <Label Text="Portfolio" 
                               Style="{StaticResource BodyStyle}"
                               HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- Featured Minerals Section -->
            <Label Text="Trending Minerals" 
                   Style="{StaticResource SubtitleStyle}"
                   Margin="0,10,0,0" />

            <CollectionView x:Name="FeaturedMineralsCollection"
                           SelectionMode="None">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" 
                                      ItemSpacing="12" />
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Style="{StaticResource CardStyle}">
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnMineralTapped"
                                                     CommandParameter="{Binding .}" />
                            </Frame.GestureRecognizers>
                            <Grid ColumnDefinitions="Auto,*,Auto" 
                                  ColumnSpacing="12">
                                
                                <!-- Mineral Icon/Image -->
                                <Frame Grid.Column="0"
                                      WidthRequest="50"
                                      HeightRequest="50"
                                      CornerRadius="25"
                                      Padding="0"
                                      BackgroundColor="{StaticResource BackgroundLight}"
                                      HasShadow="False">
                                    <Label Text="ðŸ’Ž" 
                                          FontSize="24"
                                          HorizontalOptions="Center"
                                          VerticalOptions="Center" />
                                </Frame>

                                <!-- Mineral Info -->
                                <VerticalStackLayout Grid.Column="1" 
                                                    Spacing="4"
                                                    VerticalOptions="Center">
                                    <Label Text="{Binding Name}" 
                                          Style="{StaticResource BodyStyle}"
                                          FontAttributes="Bold" />
                                    <Label Text="{Binding Origin}" 
                                          Style="{StaticResource CaptionStyle}" />
                                </VerticalStackLayout>

                                <!-- Price Info -->
                                <VerticalStackLayout Grid.Column="2" 
                                                    Spacing="4"
                                                    HorizontalOptions="End"
                                                    VerticalOptions="Center">
                                    <Label Text="{Binding Price, StringFormat='{0:C}'}" 
                                          Style="{StaticResource BodyStyle}"
                                          FontAttributes="Bold"
                                          HorizontalTextAlignment="End" />
                                    <Label Text="per kg" 
                                          Style="{StaticResource SmallTextStyle}"
                                          HorizontalTextAlignment="End" />
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- About Section -->
            <Frame Style="{StaticResource CardStyle}"
                   Margin="0,10,0,20">
                <VerticalStackLayout Spacing="12">
                    <Label Text="About Zambia Metal Exchange" 
                           Style="{StaticResource SubtitleStyle}" />
                    <Label Text="Your trusted platform for trading high-quality minerals. We connect buyers and sellers with transparency and efficiency."
                           Style="{StaticResource CaptionStyle}"
                           LineBreakMode="WordWrap" />
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
